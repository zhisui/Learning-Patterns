# 渐进式水合
服务端渲染应用是通过服务器为当前的导航内容生成HTML。服务器一旦完成了 HTML 内容的生成，其中还包含了正确显示静态 UI 所必需的 CSS 和 JSON 数据，服务器就会将数据发送到客户端，它将数据发送到客户端。由于服务器为我们生成了标记，客户端可以快速解析并在屏幕上显示它，这便完成一次快速的首屏内容绘制。

虽然服务端渲染能提供较快的首屏渲染(FCP)，但是不能提供较快的可交互时间(TTL), 网站交互所必需的 JavaScript 还没有被加载。按钮可能是交互式的，但是它们现在还不能响应交互事件，只有在加载和处理 JavaScript 包之后，这些操作才能执行。

这个过程叫做水合: React检查当前的DOM节点，并使用相应的 JavaScript 对节点进行水合。

用户在屏幕上看到非交互式用户界面的时间也被称为“恐怖谷效应”: 尽管用户可能认为他们可以与网站交互，但是还没有附加到组件上的处理程序。这对用户来说可能是一种令人沮丧的体验，因为 UI 可能看起来像是被冻结了！

从服务器接收到的 DOM 组件可能需要一段时间才能完全水化。在对组件进行水合处理之前，需要加载、处理和执行 JavaScript 文件。我们不需要像前面那样立即对整个应用程序进行水合处理，而是还可以逐步对 DOM 节点进行水合处理。渐进的水合作用使得随着时间的推移可以单独地对节点进行水合作用，这可以只请求最少的必要的 JavaScript。

 JavaScript通过逐步增加应用程序的水合作用，我们可以延迟页面中不太重要部分的水合作用。通过这种方式，我们可以减少为了使页面具有交互性而必须请求的 数量，并且只在用户需要时才对节点进行补充。渐进式水合作用还有助于避免最常见的 SSR 水合作用陷阱，即服务器呈现的 DOM 树被销毁后会立即重建。


 渐进式水合作用允许我们只根据特定的条件对组件进行水合作用，例如，当一个组件在视窗中可见时。在下面的示例中，我们有一个用户列表，一旦该列表位于 viewport 中，用户就会逐渐增加。紫色的闪光表明，当组件已经水合！

 虽然它发生得很快，但是您可以看到初始 UI 与处于水合状态的 UI 是相同的！由于最初的 HTML 包含相同的信息和样式，我们可以无缝地使组件交互，而不需要任何浮华或跳跃的 UI。渐进式水合作用使得有条件地使某些组件交互成为可能，而这完全不会引起应用程序用户的注意。
